<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--    Kanban view-->
    <record id="view_law_case_kanban" model="ir.ui.view">
        <field name="name">law.case.kanban</field>
        <field name="model">law.case</field>
        <field name="arch" type="xml">
            <kanban default_group_by="stage_id" class="o_kanban_small_column" group_create="true">
                <field name="code"/>
                <field name="name"/>
                <field name="client_id"/>
                <field name="state"/>
                <field name="stage_id"/>
                <templates>
                    <t t-name="card">
                        <div class="o_kanban_record oe_kanban_global_click">
                            <div class="o_kanban_primary">
                                <strong>
                                    <t t-esc="record.code.value"/>
                                </strong>
                                <div>
                                    <t t-esc="record.name.value"/>
                                </div>
                            </div>

                            <!-- Client -->
                            <div class="o_kanban_secondary text-muted">
                                <t t-esc="record.client_id.value"/>
                            </div>

                            <!-- Status -->
                            <div class="o_kanban_secondary">
                                <span class="badge badge-info">
                                    <t t-esc="record.state.value"/>
                                </span>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- List view -->
    <record id="view_law_case_list" model="ir.ui.view">
        <field name="name">law.case.list</field>
        <field name="model">law.case</field>
        <field name="arch" type="xml">
            <list string="Cases">
                <field name="code"/>
                <field name="name"/>
                <field name="client_id"/>
                <field name="responsible_employee_id"/>
                <field name="state"/>
                <field name="open_date"/>
                <field name="close_date"/>
            </list>
        </field>
    </record>

    <!-- Form view -->
    <record id="view_law_case_form" model="ir.ui.view">
        <field name="name">law.case.form</field>
        <field name="model">law.case</field>
        <field name="arch" type="xml">
            <form string="Case">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_set_to_draft"
                                type="object"
                                string="Set to Draft"
                                class="oe_stat_button"/>
<!--                                attrs="{'invisible': [('state', '=', 'draft')]}"-->
                        <button name="action_open"
                                type="object"
                                string="Open"
                                class="oe_stat_button"/>
<!--                                attrs="{'invisible': [('state', '!=', 'draft')]}"-->
                        <button name="action_set_on_hold"
                                type="object"
                                string="On Hold"
                                class="oe_stat_button"/>
<!--                                attrs="{'invisible': [('state', '!=', 'open')]}"-->
                        <button name="action_close"
                                type="object"
                                string="Close"
                                class="oe_stat_button"/>
<!--                                attrs="{'invisible': [('state', 'not in', ['open','on_hold'])]}"-->
                    </div>

                    <group>
                        <group>
                            <field name="code" readonly="1"/>
                            <field name="name"/>
                            <field name="state"/>
                            <field name="stage_id"/>
                        </group>
                        <group>
                            <field name="client_id"/>
                            <field name="responsible_employee_id"/>
                            <field name="open_date" readonly="1"/>
                            <field name="close_date" readonly="1"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Overview">
                            <group>
                                <field name="short_description"/>
                                <field name="facts"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>

                <chatter open_attachments="True"/>
            </form>
        </field>
    </record>

    <!-- Search view -->
<!--    <record id="view_law_case_search" model="ir.ui.view">-->
<!--        <field name="name">law.case.search</field>-->
<!--        <field name="model">law.case</field>-->
<!--        <field name="arch" type="xml">-->
<!--            <search string="Cases">-->
<!--                <field name="name"/>-->
<!--                <field name="code"/>-->
<!--                <field name="client_id"/>-->
<!--                <field name="responsible_employee_id"/>-->

<!--                <filter name="filter_open" string="Open" domain="[('state','=','open')]"/>-->
<!--                <filter name="filter_closed" string="Closed" domain="[('state','=','closed')]"/>-->

<!--                <group expand="0" string="Group By">-->
<!--                    <filter name="group_client" string="Client" context="{'group_by':'client_id'}"/>-->
<!--                    <filter name="group_lawyer" string="Responsible Lawyer" context="{'group_by':'responsible_employee_id'}"/>-->
<!--                </group>-->
<!--            </search>-->
<!--        </field>-->
<!--    </record>-->

    <!-- Action to open cases -->
    <record id="action_law_case" model="ir.actions.act_window">
        <field name="name">Cases</field>
        <field name="res_model">law.case</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="search_view_id" ref="view_law_case_list"/>
        <field name="context">{}</field>
    </record>

</odoo>